<% if @comment.errors.empty? %>
  $('#content').prepend(
    '<%= j render 'shared/flash', flash: tr(:comment, 'updated') %>'
  );

  <% if remotipart_submitted? %>
    $('#<%= class_with_id(@commentable) %> .comments').html(
      "<%= j "#{render 'comments/comments'}" %>"
    );
  <% else %>
    $('#<%= class_with_id(@commentable) %> .comments').html(
      '<%= j render 'comments/comments', commentable: @commentable %>'
    );
  <% end %>

  $('#comment-<%= @comment.id %>').css('background-color', '#eee');
<% else %>
  $('#comment-<%= @comment.id %> form').replaceWith(
    '<%= j render 'comments/form', comment: @comment,
      commentable: @commentable, edit: true %>'
  );
<% end %>